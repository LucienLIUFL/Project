# 背景层设计

背景层的设计分为
1. 背景的自动滚动
2. 添加堡垒精灵元素, 执行移动效果并自动移除

## 背景的自动滚动
在我们的飞机游戏中, 为了实现飞机飞行的效果, 要求我们的背景层可以向下滚动,
已达到玩家认为飞机正在飞行的错觉.

我们采用两张背景图精灵元素交替执行下移的方法来实现背景层的滚动效果,
具体的方法是创建两个上下并列的背景图, 第一张在上, 第二张在下, 也就是说, 
当玩家看到第一张图片的时候, 第二张图片恰好处于第一张图片看不到的地方,
然后执行第一张图片下移, 第二张图片跟随下移, 直至第一张图片完全移出屏幕,
即第二张图片完全移入屏幕, 此时将第一张图片的位置重设到第二张图片的上部,
并重新执行这个过程.
通过这样的方式, 在视觉上, 玩家无法看到屏幕外的情况, 因此可以产生背景图滚动的效果.

以下是实现此效果的伪代码:
```
firstImage.Pos.Y--;
if firstImage.Pos OutOf visibleSize:
    firstImage.Pos = Up to secondImage.Pos;
secondImage.Pos.Y--;
if secondImage.Pos OutOf visibleSize:
    secondImage.Pos = Up to firstImage.Pos
```
流程图

效果图

使用的数据结构
两张背景精灵元素的数组, 在当前背景层实例化时创建;

## 堡垒元素的添加


